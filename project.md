```mermaid
flowchart TD
    %% ÎšÎµÎ½Ï„ÏÎ¹ÎºÏŒÏ‚ Î£Ï„ÏŒÏ‡Î¿Ï‚
    GOAL["Project: Smart Bus Ecosystem<br/>Goal: Coffee & Cleanliness Services"]:::main

    %% ---------------------------------------------------------
    %% APP 1: USER SIDE (Î•Ï€Î¹Î²Î¬Ï„Î·Ï‚ / Î”Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„Î®Ï‚)
    %% ---------------------------------------------------------
    subgraph APP1["ğŸ“ app1_user (Î”Î¹ÎµÏ€Î±Ï†Î® Î§ÏÎ®ÏƒÏ„Î·)"]
        direction TB
        
        %% --- Module: Order Coffee ---
        %% Î’Î±ÏƒÎ¹ÏƒÎ¼Î­Î½Î¿ ÏƒÏ„Î·Î½ ÎµÎºÏ†ÏÎ½Î·ÏƒÎ·: Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± Î±Ï€ÏŒ ÏƒÏ…Î½ÎµÏÎ³Î±Î¶ÏŒÎ¼ÎµÎ½ÎµÏ‚ ÎºÎ±Ï†ÎµÏ„Î­ÏÎ¹ÎµÏ‚ [cite: 66]
        U1["<b>order_coffee</b><br/>Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î± ÎšÎ±Ï†Î­ & Î£Î½Î±Îº"]:::userAction
        
        U1A["1. Î£ÏÎ½Î´ÎµÏƒÎ·/Guest<br/>Î•Ï€Î¹Î»Î¿Î³Î® ÎšÎ±Ï†ÎµÏ„Î­ÏÎ¹Î±Ï‚"]:::info
        U1B["2. Î•Ï€Î¹Î»Î¿Î³Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Ï‰Î½<br/>Î ÏÎ¿ÏƒÎ±ÏÎ¼Î¿Î³Î® & ÎšÎ±Î»Î¬Î¸Î¹"]:::userAction
        U1C["3. Î Î»Î·ÏÏ‰Î¼Î®<br/>Î‘Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ Î¼Îµ ÎšÎ¬ÏÏ„Î±"]:::critical
        U1D["4. Î›Î®ÏˆÎ· Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚<br/>Î£Ï„Î¬ÏƒÎ· Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚ & ETA"]:::success

        U1 --> U1A --> U1B --> U1C --> U1D

        %% --- Module: Vacuum Control ---
        %% Î’Î±ÏƒÎ¹ÏƒÎ¼Î­Î½Î¿ ÏƒÏ„Î·Î½ ÎµÎºÏ†ÏÎ½Î·ÏƒÎ·: Î£ÎºÎ¿ÏÏ€Î±-Î¡Î¿Î¼Ï€ÏŒÏ„, Î ÏŒÎ´Î¹Î±, Î‘Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· [cite: 70-74]
        U2["<b>vacuum_control</b><br/>ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î£ÎºÎ¿ÏÏ€Î±Ï‚-Î¡Î¿Î¼Ï€ÏŒÏ„"]:::userAction
        
        U2A["1. Î•Ï€Î¹Î»Î¿Î³Î® ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼Î¿Ï<br/>Î£Î·Î¼ÎµÎ¯Î± (3D Map) & Î§ÏÏŒÎ½Î¿Ï‚"]:::warning
        U2B["2. Î‘Ï…Ï„ÏŒÎ½Î¿Î¼Î· Î‘Î½Î¬Î²Î±ÏƒÎ·<br/>Î§ÏÎ®ÏƒÎ· Î Î¿Î´Î¹ÏÎ½ Î¡Î¿Î¼Ï€ÏŒÏ„"]:::info
        U2C["3. Î‘Î½Î±Î³Î½ÏÏÎ¹ÏƒÎ· Î‘Î½Ï„Î¹ÎºÎµÎ¹Î¼Î­Î½Ï‰Î½<br/>Î”Î¹Î±Ï‡Ï‰ÏÎ¹ÏƒÎ¼ÏŒÏ‚: Î£ÎºÎ¿Ï…Ï€Î¯Î´Î¹Î± vs Î Î¿Î»ÏÏ„Î¹Î¼Î±"]:::critical
        U2D["4. Î•Î¹Î´Î¿Ï€Î¿Î¹Î®ÏƒÎµÎ¹Ï‚<br/>ÎŸÎ´Î·Î³ÏŒÏ‚, Î•Ï„Î±Î¹ÏÎµÎ¯Î±, Î•Ï€Î¹Î²Î¬Ï„ÎµÏ‚"]:::success

        U2 --> U2A --> U2B --> U2C --> U2D
    end

    %% ---------------------------------------------------------
    %% APP 2: COFFEE SHOP SIDE (ÎšÎ±Ï†ÎµÏ„Î­ÏÎ¹Î±)
    %% ---------------------------------------------------------
    subgraph APP2["ğŸ“ app2_coffeeshop (Î”Î¹ÎµÏ€Î±Ï†Î® ÎšÎ±Ï†ÎµÏ„Î­ÏÎ¹Î±Ï‚)"]
        direction TB
        
        %% --- Module: Order Control ---
        %% Î— ÎºÎ±Ï†ÎµÏ„Î­ÏÎ¹Î± Î»Î±Î¼Î²Î¬Î½ÎµÎ¹ Ï„Î·Î½ ÎµÎ½Ï„Î¿Î»Î® 
        S1["<b>order_control</b><br/>Î›Î®ÏˆÎ· Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚"]:::shopAction
        
        S1A["Î›Î®ÏˆÎ· Alert & Î‘Ï€Î¿Î´Î¿Ï‡Î®<br/>ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î§ÏÏŒÎ½Î¿Ï… Î†Ï†Î¹Î¾Î·Ï‚"]:::critical

        S1 --> S1A

        %% --- Module: Order Estimation ---
        %% Î•Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î³Î¹Î± ÏƒÏ„Î¬ÏƒÎ· Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚ 
        S2["<b>order_estimation</b><br/>Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î±ÏƒÎ¯Î±"]:::shopAction
        
        S2A["Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î±ÏƒÎ¯Î± / Aggregation"]:::info
        S2B["ÎšÎ±Î¸Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î£Ï„Î¬ÏƒÎ·Ï‚ Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚<br/>Verification"]:::warning

        S2 --> S2A --> S2B

        %% --- Module: Order Delivery ---
        S3["<b>order_delivery</b><br/>Î Î±ÏÎ¬Î´Î¿ÏƒÎ·"]:::shopAction
        
        S3A["ÎŸÎ»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ· (1-Tap)<br/>Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÏ„Î¿Î½ Î”Î¹Î±Î½Î¿Î¼Î­Î±"]:::success

        S3 --> S3A
    end

    %% ---------------------------------------------------------
    %% Î£Î¥ÎÎ”Î•Î£Î•Î™Î£ (DATA FLOW)
    %% ---------------------------------------------------------
    GOAL --> APP1
    GOAL --> APP2

    %% Î¡Î¿Î® 1: Î— Ï€Î»Î·ÏÏ‰Î¼Î® (App1) ÏƒÏ„Î­Î»Î½ÎµÎ¹ Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± ÏƒÏ„Î·Î½ ÎºÎ±Ï†ÎµÏ„Î­ÏÎ¹Î± (App2)
    U1C -.->|"Data: Order Details & User Info"| S1A

    %% Î¡Î¿Î® 2: Î— ÎºÎ±Ï†ÎµÏ„Î­ÏÎ¹Î± (App2) ÎµÏ€Î¹Î²ÎµÎ²Î±Î¹ÏÎ½ÎµÎ¹ Ï„Î· ÏƒÏ„Î¬ÏƒÎ· Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚ ÏƒÏ„Î¿ App1 
    S2B -.->|"Data: Confirmed Delivery Stop"| U1D

    %% Î¡Î¿Î® 3: Î— Î¿Î»Î¿ÎºÎ»Î®ÏÏ‰ÏƒÎ· (App2) ÎµÎ½Î·Î¼ÎµÏÏÎ½ÎµÎ¹ Ï„ÎµÎ»Î¹ÎºÎ¬ Ï„Î¿Î½ Ï‡ÏÎ®ÏƒÏ„Î· (App1)
    S3A -.->|"Notification: Order Ready"| U1D

    %% Styles
    classDef main fill:#333,stroke:#000,stroke-width:2px,color:#fff
    classDef userAction fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef shopAction fill:#fff3e0,stroke:#e65100,stroke-width:2px
    
    classDef critical fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    classDef warning fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    classDef success fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px
    classDef info fill:#f5f5f5,stroke:#616161,stroke-width:1px
```
